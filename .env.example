# Connect to Supabase via connection pooling.
DATABASE_URL="postgres://username:password@localhost:5432/dbname"

# Direct connection to the database. Used for migrations.
DIRECT_URL="postgres://username:password@localhost:5432/dbname"


# Next Auth Configuration (if needed)
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-nextauth-secret

# Other Environment Variables
NODE_ENV=development

# LINE Bot Configuration
LINE_CHANNEL_ACCESS_TOKEN=your-line-channel-access-token
LINE_CHANNEL_SECRET=your-line-channel-secret

# Cron Job Authentication
CRON_SECRET=your-cron-secret

# Notification worker tuning
# Max notifications fetched per batch by the worker
NOTIFICATION_WORKER_BATCH_SIZE=20
# Max concurrent channel groups processed
NOTIFICATION_WORKER_CONCURRENCY=3
# Max execution time for a single worker run in ms
NOTIFICATION_WORKER_MAX_TIME=300000
# Delay in ms between batches to avoid bursts
NOTIFICATION_WORKER_DELAY=1000

# Delivery request controls
# Max recipients per LINE multicast request
NOTIFICATION_GROUP_MAX_RECIPIENTS=200
# Axios request timeout for LINE API in ms
NOTIFICATION_REQUEST_TIMEOUT_MS=5000

# Feature flags and safety knobs
# Enable simple circuit breaker per channel on repeated transient errors
NOTIFICATION_CIRCUIT_ENABLED=false
# Cooldown period for open circuits in ms
NOTIFICATION_CIRCUIT_COOLDOWN_MS=60000
# Open circuit only after this many consecutive transient failures
NOTIFICATION_CIRCUIT_THRESHOLD=3

# Advance generation lead window (days)
CLASS_SERIES_ADVANCE_LEAD_DAYS=30
